<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theo dõi tiến độ - English Learning Platform</title>
    
    <!-- Bootstrap 5.3.0 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome 6.4.0 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts: Montserrat + Open Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- Custom Theme CSS -->
    <link rel="stylesheet" href="../assets/css/theme.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    
    <style>
        body {
            background: #F9FAFC;
            font-family: 'Open Sans', sans-serif;
        }
        
        .progress-container {
            max-width: 1400px;
            margin: 40px auto;
            padding: 0 20px;
        }
        
        /* Header Stats */
        .stats-header {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        
        .stat-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            text-align: center;
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #F47C26 0%, #FFA500 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
        }
        
        .stat-icon i {
            font-size: 1.5rem;
            color: white;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            color: #183B56;
            line-height: 1;
        }
        
        .stat-label {
            color: #57606F;
            font-size: 0.875rem;
            margin-top: 8px;
        }
        
        .stat-change {
            font-size: 0.75rem;
            margin-top: 8px;
        }
        
        .stat-change.positive {
            color: #2ECC71;
        }
        
        .stat-change.negative {
            color: #E74C3C;
        }
        
        /* Streak Calendar (GitHub-style) */
        .calendar-section {
            background: white;
            padding: 32px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 32px;
        }
        
        .calendar-section h2 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            color: #183B56;
            margin-bottom: 24px;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .streak-info {
            display: flex;
            gap: 32px;
        }
        
        .streak-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .streak-item i {
            color: #F47C26;
            font-size: 1.25rem;
        }
        
        .streak-item strong {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            color: #183B56;
            font-size: 1.125rem;
        }
        
        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(53, 1fr);
            gap: 4px;
            overflow-x: auto;
            padding-bottom: 10px;
        }
        
        .heatmap-cell {
            width: 14px;
            height: 14px;
            background: #E0E6ED;
            border-radius: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .heatmap-cell:hover {
            transform: scale(1.5);
            border: 2px solid #183B56;
        }
        
        .heatmap-cell.level-0 { background: #E0E6ED; }
        .heatmap-cell.level-1 { background: #FFDDC1; }
        .heatmap-cell.level-2 { background: #FFBE9A; }
        .heatmap-cell.level-3 { background: #FF9F73; }
        .heatmap-cell.level-4 { background: #F47C26; }
        
        .heatmap-legend {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 16px;
            font-size: 0.75rem;
            color: #57606F;
        }
        
        .heatmap-legend-cell {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }
        
        /* Skills Progress */
        .skills-section {
            background: white;
            padding: 32px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 32px;
        }
        
        .skills-section h2 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            color: #183B56;
            margin-bottom: 24px;
        }
        
        .skill-item {
            margin-bottom: 32px;
        }
        
        .skill-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .skill-name {
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            color: #183B56;
            font-size: 1.125rem;
        }
        
        .skill-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #183B56 0%, #2C5F8D 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .skill-percentage {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            color: #F47C26;
            font-size: 1.25rem;
        }
        
        .skill-bar {
            height: 24px;
            background: #E0E6ED;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }
        
        .skill-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #F47C26 0%, #FFA500 100%);
            border-radius: 12px;
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 12px;
        }
        
        .skill-bar-fill span {
            color: white;
            font-size: 0.75rem;
            font-family: 'Montsermat', sans-serif;
            font-weight: 700;
        }
        
        .skill-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 12px;
        }
        
        .skill-stat {
            background: #F9FAFC;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }
        
        .skill-stat-value {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            color: #183B56;
            font-size: 1.125rem;
        }
        
        .skill-stat-label {
            color: #57606F;
            font-size: 0.75rem;
        }
        
        /* Charts Section */
        .charts-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .chart-card {
            background: white;
            padding: 32px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .chart-card h3 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            color: #183B56;
            margin-bottom: 24px;
        }
        
        /* Weak Areas */
        .weak-areas-section {
            background: white;
            padding: 32px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .weak-areas-section h2 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            color: #183B56;
            margin-bottom: 24px;
        }
        
        .weak-area-card {
            background: #FFF4E5;
            border-left: 4px solid #F39C12;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 16px;
        }
        
        .weak-area-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .weak-area-title {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            color: #183B56;
        }
        
        .weak-area-score {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            color: #F39C12;
            font-size: 1.125rem;
        }
        
        .weak-area-suggestion {
            color: #2C3E50;
            line-height: 1.6;
            margin-bottom: 12px;
        }
        
        .btn-practice {
            background: #F47C26;
            color: white;
            padding: 8px 20px;
            border: none;
            border-radius: 6px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-practice:hover {
            background: #D35400;
            transform: translateY(-2px);
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .charts-section {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="progress-container">
            <!-- Header Stats -->
            <div class="stats-header">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-fire"></i>
                    </div>
                    <div class="stat-number">{{ currentStreak }}</div>
                    <div class="stat-label">Chuỗi ngày học</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> +2 ngày
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #2ECC71 0%, #27AE60 100%);">
                        <i class="fas fa-book-reader"></i>
                    </div>
                    <div class="stat-number">{{ totalLessons }}</div>
                    <div class="stat-label">Bài học hoàn thành</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> +5 tuần này
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #3498DB 0%, #2980B9 100%);">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-number">{{ totalMinutes }}</div>
                    <div class="stat-label">Phút học tập</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> +12% tháng này
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #9B59B6 0%, #8E44AD 100%);">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="stat-number">{{ totalXP }}</div>
                    <div class="stat-label">Tổng XP</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> +250 tuần này
                    </div>
                </div>
            </div>

            <!-- Streak Calendar -->
            <div class="calendar-section">
                <div class="calendar-header">
                    <h2><i class="fas fa-calendar-alt me-3"></i>Lịch sử học tập</h2>
                    <div class="streak-info">
                        <div class="streak-item">
                            <i class="fas fa-fire"></i>
                            <div>
                                <div class="stat-label">Chuỗi hiện tại</div>
                                <strong>{{ currentStreak }} ngày</strong>
                            </div>
                        </div>
                        <div class="streak-item">
                            <i class="fas fa-trophy"></i>
                            <div>
                                <div class="stat-label">Kỷ lục</div>
                                <strong>{{ longestStreak }} ngày</strong>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="heatmap-grid">
                    <div 
                        v-for="(day, index) in heatmapData" 
                        :key="index"
                        class="heatmap-cell"
                        :class="'level-' + day.level"
                        :title="day.date + ': ' + day.lessons + ' bài học'"
                    ></div>
                </div>
                
                <div class="heatmap-legend">
                    <span>Ít</span>
                    <div class="heatmap-legend-cell level-0"></div>
                    <div class="heatmap-legend-cell level-1"></div>
                    <div class="heatmap-legend-cell level-2"></div>
                    <div class="heatmap-legend-cell level-3"></div>
                    <div class="heatmap-legend-cell level-4"></div>
                    <span>Nhiều</span>
                </div>
            </div>

            <!-- Skills Progress -->
            <div class="skills-section">
                <h2><i class="fas fa-chart-line me-3"></i>Tiến độ 4 kỹ năng</h2>
                
                <div v-for="skill in skills" :key="skill.name" class="skill-item">
                    <div class="skill-header">
                        <div class="skill-name">
                            <div class="skill-icon">
                                <i :class="skill.icon"></i>
                            </div>
                            {{ skill.name }}
                        </div>
                        <div class="skill-percentage">{{ skill.progress }}%</div>
                    </div>
                    <div class="skill-bar">
                        <div class="skill-bar-fill" :style="{width: skill.progress + '%'}">
                            <span v-if="skill.progress > 15">{{ skill.progress }}%</span>
                        </div>
                    </div>
                    <div class="skill-stats">
                        <div class="skill-stat">
                            <div class="skill-stat-value">{{ skill.lessonsCompleted }}</div>
                            <div class="skill-stat-label">Bài học</div>
                        </div>
                        <div class="skill-stat">
                            <div class="skill-stat-value">{{ skill.accuracy }}%</div>
                            <div class="skill-stat-label">Độ chính xác</div>
                        </div>
                        <div class="skill-stat">
                            <div class="skill-stat-value">{{ skill.timeSpent }}h</div>
                            <div class="skill-stat-label">Thời gian</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts -->
            <div class="charts-section">
                <div class="chart-card">
                    <h3><i class="fas fa-chart-bar me-2"></i>Học tập theo tuần</h3>
                    <canvas id="weeklyChart"></canvas>
                </div>
                
                <div class="chart-card">
                    <h3><i class="fas fa-chart-pie me-2"></i>Phân bổ thời gian</h3>
                    <canvas id="timeDistributionChart"></canvas>
                </div>
            </div>

            <!-- Weak Areas -->
            <div class="weak-areas-section">
                <h2><i class="fas fa-exclamation-triangle me-3"></i>Điểm cần cải thiện</h2>
                
                <div v-for="area in weakAreas" :key="area.title" class="weak-area-card">
                    <div class="weak-area-header">
                        <div class="weak-area-title">{{ area.title }}</div>
                        <div class="weak-area-score">{{ area.score }}/100</div>
                    </div>
                    <div class="weak-area-suggestion">{{ area.suggestion }}</div>
                    <button class="btn-practice" @click="practiceArea(area)">
                        <i class="fas fa-dumbbell me-2"></i>Luyện tập ngay
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Vue.js 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <!-- App Logic -->
    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    currentStreak: 15,
                    longestStreak: 28,
                    totalLessons: 42,
                    totalMinutes: 1250,
                    totalXP: 8500,
                    heatmapData: [],
                    skills: [
                        {
                            name: 'Listening (Nghe)',
                            icon: 'fas fa-headphones',
                            progress: 75,
                            lessonsCompleted: 18,
                            accuracy: 82,
                            timeSpent: 12.5
                        },
                        {
                            name: 'Speaking (Nói)',
                            icon: 'fas fa-microphone',
                            progress: 58,
                            lessonsCompleted: 12,
                            accuracy: 68,
                            timeSpent: 8.2
                        },
                        {
                            name: 'Reading (Đọc)',
                            icon: 'fas fa-book',
                            progress: 82,
                            lessonsCompleted: 24,
                            accuracy: 88,
                            timeSpent: 15.8
                        },
                        {
                            name: 'Writing (Viết)',
                            icon: 'fas fa-pen',
                            progress: 45,
                            lessonsCompleted: 8,
                            accuracy: 62,
                            timeSpent: 6.5
                        }
                    ],
                    weakAreas: [
                        {
                            title: 'Present Perfect Tense',
                            score: 58,
                            suggestion: 'Bạn thường nhầm lẫn giữa Present Perfect và Past Simple. Hãy làm thêm 10 bài tập về thì này.'
                        },
                        {
                            title: 'Pronunciation - /θ/ và /ð/ sounds',
                            score: 52,
                            suggestion: 'Phát âm âm "th" còn chưa chuẩn. Luyện tập với các từ: think, this, that, three.'
                        },
                        {
                            title: 'Business Vocabulary',
                            score: 64,
                            suggestion: 'Vốn từ vựng kinh doanh còn hạn chế. Học thêm 50 từ về chủ đề này.'
                        }
                    ]
                };
            },
            mounted() {
                this.generateHeatmapData();
                this.initCharts();
            },
            methods: {
                generateHeatmapData() {
                    // Generate 371 days (53 weeks)
                    for (let i = 0; i < 371; i++) {
                        const date = new Date();
                        date.setDate(date.getDate() - (371 - i));
                        const lessons = Math.floor(Math.random() * 8);
                        const level = lessons === 0 ? 0 : Math.min(4, Math.ceil(lessons / 2));
                        
                        this.heatmapData.push({
                            date: date.toISOString().split('T')[0],
                            lessons: lessons,
                            level: level
                        });
                    }
                },
                initCharts() {
                    // Weekly Progress Chart
                    const weeklyCtx = document.getElementById('weeklyChart').getContext('2d');
                    new Chart(weeklyCtx, {
                        type: 'bar',
                        data: {
                            labels: ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'],
                            datasets: [{
                                label: 'Phút học',
                                data: [45, 60, 30, 75, 90, 40, 25],
                                backgroundColor: '#F47C26',
                                borderRadius: 8
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: { display: false }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    ticks: {
                                        callback: function(value) {
                                            return value + ' phút';
                                        }
                                    }
                                }
                            }
                        }
                    });
                    
                    // Time Distribution Chart
                    const timeCtx = document.getElementById('timeDistributionChart').getContext('2d');
                    new Chart(timeCtx, {
                        type: 'doughnut',
                        data: {
                            labels: ['Listening', 'Speaking', 'Reading', 'Writing'],
                            datasets: [{
                                data: [30, 20, 35, 15],
                                backgroundColor: ['#F47C26', '#3498DB', '#2ECC71', '#9B59B6'],
                                borderWidth: 0
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'bottom'
                                }
                            }
                        }
                    });
                },
                practiceArea(area) {
                    alert('Chuyển đến bài luyện tập: ' + area.title);
                    // In production: Navigate to specific practice page
                }
            }
        }).mount('#app');
    </script>
</body>
</html>
